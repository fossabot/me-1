language: node_js
node_js:
- '8'
env:
- CXX=g++-4.8
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
before_install:
- touch .env
script: npm run travis
before_deploy:
- touch .env
- mkdir -p ../dpl_cd_upload
- tar -zcf ../dpl_cd_upload/me.words.tar.gz -C ./ .
deploy:
- provider: s3
  access_key_id: AKIAI3EMH5UQ2CYHR3SA
  secret_access_key: &1
    secure: mLWxH8h2arSs2xiZn0Nd52Qn465OLyCnqqu5VeFh9mazsyaKtasna/LWTUDUyeUbQzdKIotJ1hi5H8pGvmjoehO+kbDOZK4WZ/xWyQegtbepqbZSw9GUlnnnXDOi/ePFhRpdXtY9IafQcrTuCZd6kCJoS65YDgbm6KF2Y71Tv9TRT2rpmIY03GYT3dY9GbtEJ05wypAbiEZnkiX2cNIWmx46TCMfdtylzf5QPRF+j7ujnDte1B4Fja9P0gpTmK5EH8ai4Y9lDXv+UuRNQay+Uzb2kQ6lhlqaTOkYlSaZSSOg/WP8BVX7zGqe1IbulzgaE6NZdAQAq9XotBrWVM9oOsN8ialrO1W8Vkcs2htE2+JkK04DhbmFJj7UQARPCJYKL2LvnuTr+h2injmJRMi/z1UTm0t5shxO8SgqMJuJFCS6Cbr0+QYRztc/uc1MgNeEnFt1al7x1btEqaFpAFtmroYZuZyrhkNOIGeYFWrQxh8kE7dGr092x9YfPy2PUoXgXrdbNMxFy9aZhTDHYpXqhxPuUphUzQeSJWGol+QX9STEBJidLvEdQqoYuw1eVH+r/Ptto29T6M+bgz33GhvaZo6/HTu9cTdWSGOiTzhieek2UKqWUoP2u3kWolfqjWIN0jSr/i6CEjO7ZDyfyRAxnPZ4nPLsxOozBjDpjlzh738=
  skip_cleanup: true
  on: &2
    repo: randytarampi/me.words
    branch: master
  bucket: randytarampi-releases
  region: eu-west-1
  detect_encoding: true
  local-dir: "../dpl_cd_upload"
- provider: codedeploy
  access_key_id: AKIAI3EMH5UQ2CYHR3SA
  secret_access_key: *1
  bucket: randytarampi-releases
  key: me.words.tar.gz
  bundle_type: tgz
  application: me.words
  deployment_group: web
  on: *2
  wait-until-deployed: true
  region: eu-west-1
notifications:
  slack:
    secure: bD1y+lFF6VseZ0bSi/fRqnFm2F6nil9pllhRh6ze24zmzHrftWHsvnuASZmn8MGKcqtnph/zyFKyVR+nDEXeQ04AZLU4tBoDbNWi2f85nzoUUD+8YzdQRctB9YIx818UGeZEVPBjIT1IVof+Z1AQEqM+jfl0LTNAPaADJgpLWDcNZDYNGUsibG4fapgix7P+vMTUgGFbN4J1WL243Q7pYK6x1hqOPNfDtaGSEFX7c1MUS6ULk335fkDo5M/o+vJweo0j2jboPN1n/vYpJuJRgmzP7jMISkchYjAKR2WktcM8CgC+mJye9NIaZQVn8IWEqqDYYIXM5IekEbTF2pz7bztaqgrhZdVmKqvl9edOfLL0qVt5RbguLuxSKsVw92AgajsiEhaOeNrA5gDyLq2o/xREtwpOC45M8wcJCAbHldqhjrJaRqpL2Q28mSGtmu7BDBWNwL2ylKE9NRTeY+e/ey5a70kUOorAKO5b8UhSJQJPEgBrNY1vTSb7F6eRmYkeqnqkTTMUEKIe+BtmnQ1kCPCbhDXk5BQoSumVxURAznj4SSzfamSMt1CUVpM/CPBsjui5plN1Ymwk/KvcstOkcCVU85vHS+Kare/j2n9J6wCexxiLsEUaImdldoLeUz6sVoTcy9OvWz+ohvM317gD5t/G8rHF1nWAr85s3Khx2GY=
